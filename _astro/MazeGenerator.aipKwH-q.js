import{v as B,b as P}from"./runtime-dom.esm-bundler.BqB4GfPn.js";import{g as M}from"./wasm.MCaZjMBW.js";/* empty css                               */import{_ as j}from"./_plugin-vue_export-helper.DWwmNxcz.js";import{c as u,a as r,w as x,t as h,F as b,b as H,g as c,i as p,h as T,o as d,e as V,n as E}from"./runtime-core.esm-bundler.CTP4ClTl.js";const L={__name:"MazeGenerator",setup(F,{expose:o}){o();let a=null,e=null,l=!1;const m=[],t=c([]),g=c(0),i=c(20),k=c(.1),f=c(0);let w=c(i.value),z=c(i.value);const W=p(()=>{const n=[],s=i.value,R=i.value;for(let y=0;y<R;y++)for(let _=0;_<s;_++)n.push({x:_,y});return n}),I=p(()=>{if(f.value,!e||!a)return{};const n={};for(let s of W.value)switch(e.node(s).type){case a.NodeType.Unvisited:n[`${s.x},${s.y}`]="unvisited";break;case a.NodeType.Frontier:n[`${s.x},${s.y}`]="frontier";break;case a.NodeType.Visited:n[`${s.x},${s.y}`]="visited";break;default:n[`${s.x},${s.y}`]="unvisited"}return n});T(async()=>{a=await M(),e=new a.Maze,e.resize(i.value,i.value),m.push(new a.HuntAndKill),m.push(new a.RandomWalk),m.push(new a.RecursiveBacktracker),t.value.push("HuntAndKill","RandomWalk","RecursiveBacktracker")});function S(){if(!e)return;const n=m[g.value];try{n.step(e),f.value++}catch(s){console.error("WASM step error:",s)}}function v(){l&&(S(),setTimeout(v,k.value*1e3))}function K(){l||(l=!0,v())}function U(){l=!1}function A(){if(!e)return;m[g.value].clear(),C(),l=!1,f.value++}function C(){e.resize(i.value,i.value)}function G(n){return e?e.getNorth(n):!1}function D(n){return e?e.getWest(n):!1}const N={get wasm(){return a},set wasm(n){a=n},get maze(){return e},set maze(n){e=n},get running(){return l},set running(n){l=n},generators:m,generatorNames:t,ruleIndex:g,currentSize:i,tickRate:k,refreshKey:f,get getWidth(){return w},set getWidth(n){w=n},get getHeight(){return z},set getHeight(n){z=n},locations:W,cellClasses:I,step:S,loop:v,start:K,pause:U,clear:A,resize:C,getNorth:G,getWest:D,ref:c,computed:p,onMounted:T,get getWasm(){return M}};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}},O={id:"diagram1"},q={class:"container py-3"},J={class:"mb-3"},Q={class:"mb-2"},X={class:"mb-2"},Y={class:"mb-2"},Z=["value"],$={class:"d-flex flex-column align-items-center"},ee=["viewBox"],te=["x","y"],ne=["x1","y1","x2","y2"],re=["x1","y1","x2","y2"];function se(F,o,a,e,l,m){return d(),u("figure",O,[r("div",q,[r("div",J,[r("div",{class:"btn-group mb-2"},[r("button",{class:"btn btn-primary",onClick:e.step},"Step"),r("button",{class:"btn btn-success",onClick:e.start},"Start"),r("button",{class:"btn btn-warning",onClick:e.pause},"Pause"),r("button",{class:"btn btn-danger",onClick:e.clear},"Clear")]),r("div",Q,[r("label",null,"Tick Rate: "+h(e.tickRate.toFixed(2))+"s",1),x(r("input",{type:"range",min:"0.05",max:"1",step:"0.01","onUpdate:modelValue":o[0]||(o[0]=t=>e.tickRate=t),class:"form-range"},null,512),[[B,e.tickRate,void 0,{number:!0}]])]),r("div",X,[r("label",null,"Width: "+h(e.currentSize),1),x(r("input",{type:"range",min:"5",max:"20","onUpdate:modelValue":o[1]||(o[1]=t=>e.currentSize=t),onChange:e.resize,class:"form-range"},null,544),[[B,e.currentSize,void 0,{number:!0}]])]),r("div",Y,[o[3]||(o[3]=r("label",null,"Generator",-1)),x(r("select",{"onUpdate:modelValue":o[2]||(o[2]=t=>e.ruleIndex=t),class:"form-select"},[(d(!0),u(b,null,H(e.generatorNames,(t,g)=>(d(),u("option",{key:g,value:g},h(t),9,Z))),128))],512),[[P,e.ruleIndex]])])]),r("div",$,[(d(),u("svg",{viewBox:`0 0 ${e.getWidth} ${e.getHeight}`},[(d(!0),u(b,null,H(e.locations,t=>(d(),u(b,{key:`${t.x},${t.y}-${e.refreshKey}`},[r("rect",{class:E(["cell",e.cellClasses[`${t.x},${t.y}`]]),x:t.x,y:t.y,width:1,height:1},null,10,te),e.getNorth(t)?(d(),u("line",{key:0,x1:t.x,y1:t.y,x2:t.x+1,y2:t.y},null,8,ne)):V("",!0),e.getWest(t)?(d(),u("line",{key:1,x1:t.x,y1:t.y,x2:t.x,y2:t.y+1},null,8,re)):V("",!0)],64))),128))],8,ee))])])])}const ce=j(L,[["render",se],["__scopeId","data-v-910bc880"]]);export{ce as default};
