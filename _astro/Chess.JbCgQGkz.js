import{v as w,w as m}from"./runtime-dom.esm-bundler.w4cRRVPK.js";import{_ as v,M as L}from"./_plugin-vue_export-helper.BlOR2g55.js";/* empty css                       */import{c as l,a as s,F as h,b as f,w as M,t as g,s as b,r as x,o as a,n as T,e as p,f as P}from"./runtime-core.esm-bundler.BbxBGZOd.js";const D=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="45" height="45">
  <path d="m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z" style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;"/>
</svg>
`,S=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>\r
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="45" height="45">\r
  <g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" transform="translate(0,0.3)">\r
    <path\r
      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"\r
      style="fill:#ffffff; stroke:#000000;" />\r
    <path\r
      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"\r
      style="fill:#ffffff; stroke:#000000;" />\r
    <path\r
      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"\r
      style="fill:#000000; stroke:#000000;" />\r
    <path\r
      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"\r
      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"\r
      style="fill:#000000; stroke:#000000;" />\r
  </g>\r
</svg>\r
`,U=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>\r
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="45" height="45">\r
  <g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" transform="translate(0,0.6)">\r
    <g style="fill:#ffffff; stroke:#000000; stroke-linecap:butt;">\r
      <path d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"/>\r
      <path d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"/>\r
      <path d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"/>\r
    </g>\r
    <path d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18" style="fill:none; stroke:#000000; stroke-linejoin:miter;"/>\r
  </g>\r
</svg>\r
`,V=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>\r
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="45" height="45">\r
  <g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" transform="translate(0,0.3)">\r
    <path\r
      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "\r
      style="stroke-linecap:butt;" />\r
    <path\r
      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "\r
      style="stroke-linecap:butt;" />\r
    <path\r
      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14"\r
      style="stroke-linecap:butt;" />\r
    <path\r
      d="M 34,14 L 31,17 L 14,17 L 11,14" />\r
    <path\r
      d="M 31,17 L 31,29.5 L 14,29.5 L 14,17"\r
      style="stroke-linecap:butt; stroke-linejoin:miter;" />\r
    <path\r
      d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5" />\r
    <path\r
      d="M 11,14 L 34,14"\r
      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />\r
  </g>\r
</svg>\r
`,E=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="45" height="45">
  <g style="fill:#ffffff;stroke:#000000;stroke-width:1.5;stroke-linejoin:round">
    <path d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"/>
    <path d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"/>
    <path d="M 11.5,30 C 15,29 30,29 33.5,30" style="fill:none"/>
    <path d="M 12,33.5 C 18,32.5 27,32.5 33,33.5" style="fill:none"/>
    <circle cx="6" cy="12" r="2" />
    <circle cx="14" cy="9" r="2" />
    <circle cx="22.5" cy="8" r="2" />
    <circle cx="31" cy="9" r="2" />
    <circle cx="39" cy="12" r="2" />
  </g>
</svg>
`,G=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="45" height="45">
  <g fill="none" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5">
    <path stroke-linejoin="miter" d="M22.5 11.63V6M20 8h5"/>
    <path fill="#fff" stroke-linecap="butt" stroke-linejoin="miter" d="M22.5 25s4.5-7.5 3-10.5c0 0-1-2.5-3-2.5s-3 2.5-3 2.5c-1.5 3 3 10.5 3 10.5"/>
    <path fill="#fff" d="M12.5 37c5.5 3.5 14.5 3.5 20 0v-7s9-4.5 6-10.5c-4-6.5-13.5-3.5-16 4V27v-3.5c-2.5-7.5-12-10.5-16-4-3 6 6 10.5 6 10.5v7"/>
    <path d="M12.5 30c5.5-3 14.5-3 20 0m-20 3.5c5.5-3 14.5-3 20 0m-20 3.5c5.5-3 14.5-3 20 0"/>
  </g>
</svg>`,_=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="45" height="45">
  <path d="m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z" style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;"/>
</svg>
`,z=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>\r
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="45" height="45">\r
  <g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" transform="translate(0,0.3)">\r
    <path\r
      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"\r
      style="fill:#000000; stroke:#000000;" />\r
    <path\r
      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"\r
      style="fill:#000000; stroke:#000000;" />\r
    <path\r
      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"\r
      style="fill:#ffffff; stroke:#ffffff;" />\r
    <path\r
      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"\r
      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"\r
      style="fill:#ffffff; stroke:#ffffff;" />\r
    <path\r
      d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z "\r
      style="fill:#ffffff; stroke:none;" />\r
  </g>\r
</svg>\r
`,j=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>\r
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="45" height="45">\r
  <g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" transform="translate(0,0.6)">\r
    <g style="fill:#000000; stroke:#000000; stroke-linecap:butt;">\r
      <path d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"/>\r
      <path d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"/>\r
      <path d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"/>\r
    </g>\r
    <path d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18" style="fill:none; stroke:#ffffff; stroke-linejoin:miter;"/>\r
  </g>\r
</svg>\r
`,B=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="45" height="45">
  <g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" transform="translate(0,0.3)">
    <path
      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "
      style="stroke-linecap:butt;" />
    <path
      d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z "
      style="stroke-linecap:butt;" />
    <path
      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "
      style="stroke-linecap:butt;" />
    <path
      d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z "
      style="stroke-linecap:butt;stroke-linejoin:miter;" />
    <path
      d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z "
      style="stroke-linecap:butt;" />
    <path
      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z "
      style="stroke-linecap:butt;" />
    <path
      d="M 12,35.5 L 33,35.5 L 33,35.5"
      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />
    <path
      d="M 13,31.5 L 32,31.5"
      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />
    <path
      d="M 14,29.5 L 31,29.5"
      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />
    <path
      d="M 14,16.5 L 31,16.5"
      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />
    <path
      d="M 11,14 L 34,14"
      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />
  </g>
</svg>
`,F=`<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="45"
height="45">
  <g style="fill:#000000;stroke:#000000;stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round">

    <path d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"
    style="stroke-linecap:butt;fill:#000000" />
    <path d="m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z" />
    <path d="M 11.5,30 C 15,29 30,29 33.5,30" />
    <path d="m 12,33.5 c 6,-1 15,-1 21,0" />
    <circle cx="6" cy="12" r="2" />
    <circle cx="14" cy="9" r="2" />
    <circle cx="22.5" cy="8" r="2" />
    <circle cx="31" cy="9" r="2" />
    <circle cx="39" cy="12" r="2" />
    <path d="M 11,38.5 A 35,35 1 0 0 34,38.5"
    style="fill:none; stroke:#000000;stroke-linecap:butt;" />
    <g style="fill:none; stroke:#ffffff;">
      <path d="M 11,29 A 35,35 1 0 1 34,29" />
      <path d="M 12.5,31.5 L 32.5,31.5" />
      <path d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5" />
      <path d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5" />
    </g>
  </g>
</svg>
`,I=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="45" height="45">
  <g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">
    <path d="M 22.5,11.63 L 22.5,6" style="fill:none; stroke:#000000; stroke-linejoin:miter;" id="path6570"/>
    <path d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25" style="fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;"/>
    <path d="M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37" style="fill:#000000; stroke:#000000;"/>
    <path d="M 20,8 L 25,8" style="fill:none; stroke:#000000; stroke-linejoin:miter;"/>
    <path d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5" style="fill:none; stroke:#ffffff;"/>
    <path d="M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37" style="fill:none; stroke:#ffffff;"/>
  </g>
</svg>
`,N={"0_1":D,"0_2":S,"0_3":U,"0_4":V,"0_5":E,"0_6":G,"8_1":_,"8_2":z,"8_3":j,"8_4":B,"8_5":F,"8_6":I},R=["a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1"],u=["a","b","c","d","e","f","g","h"],k=8;function C(e){const t=e[0],o=parseInt(e[1]),d=u.indexOf(t),i=8-o;if(d===-1||i<0||i>7)throw new Error(`Invalid square name: ${e}`);return i*8+d}const W=8;function A(e){return(e&W)>>3}const Y={data(){return{engine:null,draggingSquare:null,dragStartPointer:null,dragStartPos:null,dragPositions:x({}),pieceMap:N,boardVersion:0,possibleMoves:{},fenInput:""}},async beforeCreate(){const e=await L();this.engine=b(new e.Chess)},computed:{squares(){if(this.boardVersion,!this.engine)return[];const e=this.engine.get_board(),t=[];for(let o=8;o>=1;o--)for(let d=0;d<8;d++){const i=(8-o)*8+d,r=e.get(i),n=r&7,c=r&24,y=n===0?null:`${c}_${n}`;t.push({name:`${u[d]}${o}`,idx:i,san:R[i],x:d,y:8-o,color:(d+o)%2===0?"light":"dark",piece:y})}return t}},methods:{getPieceCursor(e){return!e||!e.piece?"default":this.draggingSquare===e.name?"grabbing":"grab"},loadFEN(){this.onReset(),this.engine.load(this.fenInput),this.boardVersion++,this.$forceUpdate()},onUndo(){this.engine.undo(),this.possibleMoves={},this.boardVersion++,this.$forceUpdate()},onRedo(){this.engine.redo(),this.possibleMoves={},this.boardVersion++,this.$forceUpdate()},onReset(){this.engine.reset(),this.possibleMoves={},this.boardVersion++,this.$forceUpdate(),this.engine.moves().forEach(t=>console.log(t))},getHash(){return this.engine?this.engine.zobrist():""},getCastlingRights(){return this.engine?this.engine.castlingRights():"Never"},getTurn(){return this.engine?this.engine.turn().value?"Black":"White":""},inCheck(){return this.engine?this.engine.inCheck()?"True":"False":""},isCheckmate(){return this.engine?this.engine.isCheckmate()?"True":"False":""},onClear(){this.engine.clear(),this.boardVersion++,this.$forceUpdate()},selectPiece(e){this.selectedSquare=e;const t=C(e.name),o=this.engine.get_board().get(t);if(this.engine.turn().value!=A(o)){this.possibleMoves={};return}this.possibleMoves=this.engine.moves({square:t})},svgPoint(e){const t=this.$refs.svgRef;let o=t.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o.matrixTransform(t.getScreenCTM().inverse())},onPointerDown(e,t){t.preventDefault();const o=this.svgPoint(t);this.selectPiece(e),this.draggingSquare=e.name,this.dragStartSquare=e,this.dragPositions[e.name]={x:o.x-(e.x+.5),y:o.y-(e.y+.5)},t.target.setPointerCapture(t.pointerId)},onPointerMove(e){if(!this.draggingSquare)return;const t=this.svgPoint(e),o=this.dragStartSquare;o&&(this.dragPositions[this.draggingSquare]={x:t.x-(o.x+.5),y:t.y-(o.y+.5)})},onPointerUp(e){if(!this.draggingSquare)return;const t=this.svgPoint(e),o=Math.min(k-1,Math.max(0,Math.floor(t.x))),d=Math.min(k-1,Math.max(0,Math.floor(t.y))),i=C(this.draggingSquare),r=d*8+o;this.engine.move(i,r)&&(this.possibleMoves={},this.boardVersion++,this.$forceUpdate()),delete this.dragPositions[this.draggingSquare],this.draggingSquare=null,this.dragStartSquare=null},getPieceTransform(e){const t=this.dragPositions[e.name]||{x:0,y:0};return`translate(${e.x+t.x} ${e.y+t.y}) scale(${1/45})`},handlePieceMove(e,t){console.log("Piece moved from",e,"to",t)},indexToCoords(e){return{x:e%8,y:Math.floor(e/8)}}}},O={id:"diagram1"},H={class:"d-flex flex-column align-items-center"},K=["x","y"],Q=["x","y"],X=["transform"],Z=["innerHTML"],J=["x","y","onPointerdown"],q=["cx","cy"],$=["transform"],nn=["innerHTML"],tn={class:"mt-3"},en={class:"btn-toolbar mb-3",role:"toolbar","aria-label":"Toolbar with button groups"},rn={class:"btn-group me-2",role:"group","aria-label":"Reset and Clear"},on={class:"btn-group me-2",role:"group","aria-label":"Reset and Clear"},sn={class:"input-group mb-3"};function ln(e,t,o,d,i,r){return a(),l("figure",O,[s("div",H,[(a(),l("svg",{ref:"svgRef",viewBox:"0 0 8 8",width:"512",height:"512",onPointermove:t[0]||(t[0]=(...n)=>r.onPointerMove&&r.onPointerMove(...n)),onPointerup:t[1]||(t[1]=(...n)=>r.onPointerUp&&r.onPointerUp(...n)),onPointercancel:t[2]||(t[2]=(...n)=>r.onPointerUp&&r.onPointerUp(...n))},[(a(!0),l(h,null,f(r.squares,n=>(a(),l("g",null,[(a(),l("rect",{key:n.name,x:n.x,y:n.y,width:"1",height:"1",class:T(n.color)},null,10,K))]))),256)),(a(!0),l(h,null,f(r.squares,n=>(a(),l("text",{key:n.name+"-debug",x:n.x+.05,y:n.y+.95,"font-size":"0.2",fill:"red"},g(n.san||""),9,Q))),128)),(a(!0),l(h,null,f(r.squares,n=>(a(),l(h,{key:n.name+"-piece"},[n&&n.piece&&n.name!==i.draggingSquare?(a(),l("g",{key:n.name+"-piece",transform:r.getPieceTransform(n)},[s("g",{innerHTML:i.pieceMap[n.piece]},null,8,Z)],8,X)):p("",!0),n&&n.piece?(a(),l("rect",{key:n.name+"-hover",x:n.x,y:n.y,width:"1",height:"1",fill:"transparent",style:P({cursor:r.getPieceCursor(n)}),onPointerdown:c=>r.onPointerDown(n,c)},null,44,J)):p("",!0)],64))),128)),(a(!0),l(h,null,f(i.possibleMoves,n=>(a(),l("circle",{key:`${n.from}-${n.to}`,cx:r.indexToCoords(n.to).x+.5,cy:r.indexToCoords(n.to).y+.5,r:"0.20",fill:"rgba(200, 214, 229, 0.85)"},null,8,q))),128)),(a(!0),l(h,null,f(r.squares,n=>(a(),l(h,null,[n&&n.piece&&n.name===i.draggingSquare?(a(),l("g",{key:n.name+"-dragging",transform:r.getPieceTransform(n)},[s("g",{innerHTML:i.pieceMap[n.piece]},null,8,nn)],8,$)):p("",!0)],64))),256))],544))]),s("div",tn,[s("div",en,[s("div",rn,[s("button",{type:"button",class:"btn btn-primary",onClick:t[3]||(t[3]=(...n)=>r.onReset&&r.onReset(...n))},"Reset"),s("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=(...n)=>r.onClear&&r.onClear(...n))},"Clear")]),s("div",on,[s("button",{type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=(...n)=>r.onUndo&&r.onUndo(...n))},"Undo"),s("button",{type:"button",class:"btn btn-primary",onClick:t[6]||(t[6]=(...n)=>r.onRedo&&r.onRedo(...n))},"Redo")])]),s("div",sn,[s("button",{class:"btn btn-primary",onClick:t[7]||(t[7]=(...n)=>r.loadFEN&&r.loadFEN(...n)),type:"button"},"Load FEN"),M(s("input",{type:"text",class:"form-control",placeholder:"Enter FEN","onUpdate:modelValue":t[8]||(t[8]=n=>i.fenInput=n),onKeyup:t[9]||(t[9]=m((...n)=>r.loadFEN&&r.loadFEN(...n),["enter"]))},null,544),[[w,i.fenInput]])]),t[10]||(t[10]=s("h2",null,"Details:",-1)),s("p",null,"Zobrist Hash: "+g(r.getHash()),1),s("p",null,"Castling Rights: "+g(r.getCastlingRights()),1),s("p",null,"Turn: "+g(r.getTurn()),1),s("p",null,"Check: "+g(r.inCheck()),1),s("p",null,"Checkmate: "+g(r.isCheckmate()),1)])])}const fn=v(Y,[["render",ln],["__scopeId","data-v-df2e74b6"]]);export{fn as default};
