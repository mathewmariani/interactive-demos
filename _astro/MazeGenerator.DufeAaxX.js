import{v as B,b as j}from"./runtime-dom.esm-bundler.CPQvebKl.js";import{M as E,_ as L}from"./_plugin-vue_export-helper.D2kPzsFh.js";/* empty css                               */import{c as u,a as r,w as h,t as x,F as b,r as H,g as c,h as p,i as T,o as d,d as V,n as O}from"./runtime-core.esm-bundler.C76Cr3_2.js";let k;async function F(){return k||(k=await E()),k}const q={__name:"MazeGenerator",setup(I,{expose:o}){o();let a=null,e=null,l=!1;const g=[],t=c([]),m=c(0),i=c(20),w=c(.1),f=c(0);let z=c(i.value),W=c(i.value);const S=p(()=>{const n=[],s=i.value,R=i.value;for(let y=0;y<R;y++)for(let _=0;_<s;_++)n.push({x:_,y});return n}),K=p(()=>{if(f.value,!e||!a)return{};const n={};for(let s of S.value)switch(e.node(s).type){case a.NodeType.Unvisited:n[`${s.x},${s.y}`]="unvisited";break;case a.NodeType.Frontier:n[`${s.x},${s.y}`]="frontier";break;case a.NodeType.Visited:n[`${s.x},${s.y}`]="visited";break;default:n[`${s.x},${s.y}`]="unvisited"}return n});T(async()=>{a=await F(),e=new a.Maze,e.resize(i.value,i.value),g.push(new a.HuntAndKill),g.push(new a.RandomWalk),g.push(new a.RecursiveBacktracker),t.value.push("HuntAndKill","RandomWalk","RecursiveBacktracker")});function C(){if(!e)return;const n=g[m.value];try{n.step(e),f.value++}catch(s){console.error("WASM step error:",s)}}function v(){l&&(C(),setTimeout(v,w.value*1e3))}function U(){l||(l=!0,v())}function A(){l=!1}function G(){if(!e)return;g[m.value].clear(),N(),l=!1,f.value++}function N(){e.resize(i.value,i.value)}function D(n){return e?e.getNorth(n):!1}function P(n){return e?e.getWest(n):!1}const M={get wasm(){return a},set wasm(n){a=n},get maze(){return e},set maze(n){e=n},get running(){return l},set running(n){l=n},generators:g,generatorNames:t,ruleIndex:m,currentSize:i,tickRate:w,refreshKey:f,get getWidth(){return z},set getWidth(n){z=n},get getHeight(){return W},set getHeight(n){W=n},locations:S,cellClasses:K,step:C,loop:v,start:U,pause:A,clear:G,resize:N,getNorth:D,getWest:P,ref:c,computed:p,onMounted:T,get getWasm(){return F}};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}},J={id:"diagram1"},Q={class:"container py-3"},X={class:"mb-3"},Y={class:"mb-2"},Z={class:"mb-2"},$={class:"mb-2"},ee=["value"],te={class:"d-flex flex-column align-items-center"},ne=["viewBox"],re=["x","y"],se=["x1","y1","x2","y2"],ae=["x1","y1","x2","y2"];function oe(I,o,a,e,l,g){return d(),u("figure",J,[r("div",Q,[r("div",X,[r("div",{class:"btn-group mb-2"},[r("button",{class:"btn btn-primary",onClick:e.step},"Step"),r("button",{class:"btn btn-success",onClick:e.start},"Start"),r("button",{class:"btn btn-warning",onClick:e.pause},"Pause"),r("button",{class:"btn btn-danger",onClick:e.clear},"Clear")]),r("div",Y,[r("label",null,"Tick Rate: "+x(e.tickRate.toFixed(2))+"s",1),h(r("input",{type:"range",min:"0.05",max:"1",step:"0.01","onUpdate:modelValue":o[0]||(o[0]=t=>e.tickRate=t),class:"form-range"},null,512),[[B,e.tickRate,void 0,{number:!0}]])]),r("div",Z,[r("label",null,"Width: "+x(e.currentSize),1),h(r("input",{type:"range",min:"5",max:"20","onUpdate:modelValue":o[1]||(o[1]=t=>e.currentSize=t),onChange:e.resize,class:"form-range"},null,544),[[B,e.currentSize,void 0,{number:!0}]])]),r("div",$,[o[3]||(o[3]=r("label",null,"Generator",-1)),h(r("select",{"onUpdate:modelValue":o[2]||(o[2]=t=>e.ruleIndex=t),class:"form-select"},[(d(!0),u(b,null,H(e.generatorNames,(t,m)=>(d(),u("option",{key:m,value:m},x(t),9,ee))),128))],512),[[j,e.ruleIndex]])])]),r("div",te,[(d(),u("svg",{viewBox:`0 0 ${e.getWidth} ${e.getHeight}`,width:"512",height:"512"},[(d(!0),u(b,null,H(e.locations,t=>(d(),u(b,{key:`${t.x},${t.y}-${e.refreshKey}`},[r("rect",{class:O(["cell",e.cellClasses[`${t.x},${t.y}`]]),x:t.x,y:t.y,width:1,height:1},null,10,re),e.getNorth(t)?(d(),u("line",{key:0,x1:t.x,y1:t.y,x2:t.x+1,y2:t.y},null,8,se)):V("",!0),e.getWest(t)?(d(),u("line",{key:1,x1:t.x,y1:t.y,x2:t.x,y2:t.y+1},null,8,ae)):V("",!0)],64))),128))],8,ne))])])])}const de=L(q,[["render",oe],["__scopeId","data-v-afbe9327"]]);export{de as default};
